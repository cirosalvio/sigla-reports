<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version 6.6.0.final utlizzo versione della libreria JasperReports6.6.0  -->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="ordini_acq" pageWidth="730" pageHeight="950" whenNoDataType="AllSectionsNoDetail" columnWidth="730" leftMargin="0" rightMargin="0" topMargin="10" bottomMargin="0" uuid="7a5a3dd8-3013-4b20-a254-ed19ce09e5ce">
	<style name="NORMAL" isDefault="true" fontName="Times New Roman" fontSize="8" pdfFontName="Times-Roman"/>
	<style name="BOLD" style="NORMAL" fontName="Times New Roman" fontSize="8" isBold="true" pdfFontName="Times-Bold"/>
	<style name="TITLE" style="BOLD" fontName="Times New Roman" fontSize="12" isBold="true" pdfFontName="Times-Bold"/>
	<parameter name="CD_CDS" class="java.lang.String">
		<defaultValueExpression><![CDATA["000"]]></defaultValueExpression>
	</parameter>
	<parameter name="CD_UNITA_OPERATIVA" class="java.lang.String">
		<defaultValueExpression><![CDATA["SA.BIL"]]></defaultValueExpression>
	</parameter>
	<parameter name="ESERCIZIO" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[2019]]></defaultValueExpression>
	</parameter>
	<parameter name="CD_NUMERATORE" class="java.lang.String">
		<defaultValueExpression><![CDATA["BIL"]]></defaultValueExpression>
	</parameter>
	<parameter name="NUMERO" class="java.lang.Integer">
		<defaultValueExpression><![CDATA[6]]></defaultValueExpression>
	</parameter>
	<parameter name="DIR_SUBREPORT" class="java.lang.String">
		<defaultValueExpression><![CDATA["/"]]></defaultValueExpression>
	</parameter>
	<queryString>
		<![CDATA[select 
ord.STATO,
riga.IM_IVA_DIVISA,
riga.IM_IMPONIBILE_DIVISA,
riga.PREZZO_UNITARIO,
riga.IM_IMPONIBILE,
fornitore.CD_TERZO ,
riga.RIGA,
riga.NOTA_RIGA,
riga.DS_BENE_SERVIZIO,
riga.CD_BENE_SERVIZIO,
riga.PREZZO_UNITARIO,
riga.CD_VOCE_IVA,
bene.UNITA_MISURA,
riga.IM_IMPONIBILE,
cr.CD_UOP_DEST,
cr.QUANTITA,
ord.IM_TOTALE_ORDINE,
fornitore.DENOMINAZIONE_SEDE,
fornitore.VIA_SEDE,
fornitore.NUMERO_CIVICO_SEDE,
fornitore.CAP_COMUNE_SEDE,
comune.DS_COMUNE,
ord.NUMERO,
ord.CD_NUMERATORE,
ord.DATA_ORDINE,
ord.CD_UNITA_OPERATIVA,
ord.NOTA,
notaprec.NOTA notaprecodificata,
notaprec.nota2 nota2precodificata,
uo.CD_UNITA_OPERATIVA
,numer.TI_ISTITUZ_COMMERC 
from  ORDINE_ACQ ord
inner join TERZO  fornitore on
ord.cd_terzo =fornitore.cd_terzo
inner join comune on fornitore.pg_comune_sede =comune.pg_comune
inner join ordine_acq_riga  riga on ord.CD_CDS=riga.CD_CDS
                                and ord.CD_UNITA_OPERATIVA=riga.CD_UNITA_OPERATIVA
                                and ord.ESERCIZIO=riga.ESERCIZIO
                                and ord.CD_NUMERATORE=riga.CD_NUMERATORE
                                and ord.NUMERO=riga.NUMERO
inner join  UNITA_OPERATIVA_ORD uo on uo.CD_UNITA_OPERATIVA=ord.CD_UNITA_OPERATIVA 
inner join ordine_acq_consegna cr on 
cr.CD_CDS=riga.CD_CDS
and cr.CD_UNITA_OPERATIVA=riga.CD_UNITA_OPERATIVA
and cr.ESERCIZIO=riga.ESERCIZIO
and cr.CD_NUMERATORE=riga.CD_NUMERATORE
and cr.NUMERO=riga.NUMERO
and cr.riga=riga.riga
inner join NUMERAZIONE_ORD numer on 
 ord.CD_UNITA_OPERATIVA=numer.CD_UNITA_OPERATIVA
and ord.CD_NUMERATORE=numer.CD_NUMERATORE
and ord.ESERCIZIO=numer.ESERCIZIO
inner join bene_servizio bene on bene.cd_bene_servizio=riga.cd_bene_servizio
left OUTER join nota_precodificata notaprec on   notaprec.cd_cds=ord.cd_cds
and notaprec.CD_NOTA_PRECODIFICATA=ord.CD_NOTA_PRECODIFICATA
where ord.CD_CDS= $P{CD_CDS} 
and ord.CD_UNITA_OPERATIVA= $P{CD_UNITA_OPERATIVA} 
and ord.ESERCIZIO= $P{ESERCIZIO} 
and ord.CD_NUMERATORE= $P{CD_NUMERATORE} 
and ord.NUMERO= $P{NUMERO}]]>
	</queryString>
	<field name="STATO" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="STATO"/>
	</field>
	<field name="IM_IVA_DIVISA" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="IM_IVA_DIVISA"/>
	</field>
	<field name="IM_IMPONIBILE_DIVISA" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="IM_IMPONIBILE_DIVISA"/>
	</field>
	<field name="PREZZO_UNITARIO" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="PREZZO_UNITARIO"/>
	</field>
	<field name="IM_IMPONIBILE" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="IM_IMPONIBILE"/>
	</field>
	<field name="CD_TERZO" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="CD_TERZO"/>
	</field>
	<field name="RIGA" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="RIGA"/>
	</field>
	<field name="NOTA_RIGA" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="NOTA_RIGA"/>
	</field>
	<field name="DS_BENE_SERVIZIO" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="DS_BENE_SERVIZIO"/>
	</field>
	<field name="CD_BENE_SERVIZIO" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="CD_BENE_SERVIZIO"/>
	</field>
	<field name="COLUMN_11" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="PREZZO_UNITARIO"/>
	</field>
	<field name="CD_VOCE_IVA" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="CD_VOCE_IVA"/>
	</field>
	<field name="UNITA_MISURA" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="UNITA_MISURA"/>
	</field>
	<field name="COLUMN_14" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="IM_IMPONIBILE"/>
	</field>
	<field name="CD_UOP_DEST" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="CD_UOP_DEST"/>
	</field>
	<field name="QUANTITA" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="QUANTITA"/>
	</field>
	<field name="IM_TOTALE_ORDINE" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="IM_TOTALE_ORDINE"/>
	</field>
	<field name="DENOMINAZIONE_SEDE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="DENOMINAZIONE_SEDE"/>
	</field>
	<field name="VIA_SEDE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="VIA_SEDE"/>
	</field>
	<field name="NUMERO_CIVICO_SEDE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="NUMERO_CIVICO_SEDE"/>
	</field>
	<field name="CAP_COMUNE_SEDE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="CAP_COMUNE_SEDE"/>
	</field>
	<field name="DS_COMUNE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="DS_COMUNE"/>
	</field>
	<field name="NUMERO" class="java.math.BigDecimal">
		<property name="com.jaspersoft.studio.field.label" value="NUMERO"/>
	</field>
	<field name="CD_NUMERATORE" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="CD_NUMERATORE"/>
	</field>
	<field name="DATA_ORDINE" class="java.sql.Timestamp">
		<property name="com.jaspersoft.studio.field.label" value="DATA_ORDINE"/>
	</field>
	<field name="CD_UNITA_OPERATIVA" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="CD_UNITA_OPERATIVA"/>
	</field>
	<field name="NOTA" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="NOTA"/>
	</field>
	<field name="NOTAPRECODIFICATA" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="NOTAPRECODIFICATA"/>
	</field>
	<field name="NOTA2PRECODIFICATA" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="NOTA2PRECODIFICATA"/>
	</field>
	<field name="COLUMN_30" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="CD_UNITA_OPERATIVA"/>
	</field>
	<field name="TI_ISTITUZ_COMMERC" class="java.lang.String">
		<property name="com.jaspersoft.studio.field.label" value="TI_ISTITUZ_COMMERC"/>
	</field>
	<variable name="totaleIva" class="java.math.BigDecimal" resetType="None" incrementType="Report" calculation="Sum">
		<variableExpression><![CDATA[$F{IM_IVA_DIVISA}]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="totaleMerce" class="java.math.BigDecimal" resetType="None" incrementType="Report" calculation="Sum">
		<variableExpression><![CDATA[$F{IM_IMPONIBILE_DIVISA}]]></variableExpression>
		<initialValueExpression><![CDATA[0]]></initialValueExpression>
	</variable>
	<variable name="TotSconto" class="java.math.BigDecimal" calculation="Sum">
		<variableExpression><![CDATA[$F{PREZZO_UNITARIO}.subtract$F{IM_IMPONIBILE}]]></variableExpression>
	</variable>
	<pageHeader>
		<band height="201" splitType="Stretch">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
			<textField>
				<reportElement x="110" y="40" width="100" height="30" uuid="d112d950-a890-4506-96af-6d441342f9fa"/>
				<textFieldExpression><![CDATA[$P{DIR_SUBREPORT}]]></textFieldExpression>
			</textField>
		</band>
	</pageHeader>
	<columnHeader>
		<band height="55">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
		</band>
	</columnHeader>
	<detail>
		<band height="72" splitType="Stretch"/>
	</detail>
	<pageFooter>
		<band height="62" splitType="Stretch"/>
	</pageFooter>
	<lastPageFooter>
		<band height="191">
			<property name="com.jaspersoft.studio.unit.height" value="px"/>
		</band>
	</lastPageFooter>
</jasperReport>
